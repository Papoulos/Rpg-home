<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de RÃ´le en Ligne</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <aside class="panel left-panel">
            <h2>Chat</h2>
            <div class="chat-messages" id="chat-messages">
                <!-- Les messages du chat apparaÃ®tront ici -->
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Ã‰crivez votre message...">
                <button id="send-button">Envoyer</button>
            </div>
            <div class="dice-roller">
                <h3>Lancer de dÃ©s</h3>
                <button class="dice-button" data-die="4">4</button>
                <button class="dice-button" data-die="6">6</button>
                <button class="dice-button" data-die="10">10</button>
                <button class="dice-button" data-die="20">20</button>
                <button class="dice-button" data-die="100">100</button>
            </div>
        </aside>
        <main class="main-content">
            <div class="main-display">
                <div id="carte-content" class="tab-content">
                    <!-- ContrÃ´les pour le MJ, cachÃ©s par dÃ©faut -->
                    <div class="image-controls hidden">
                        <select id="image-select">
                            <option value="">Choisir une image</option>
                        </select>
                        <button id="add-image-btn" class="control-btn btn-add" title="Ajouter une image">+</button>
                        <button id="delete-image-btn" class="control-btn btn-delete" title="Supprimer l'image">-</button>
                    </div>

                    <!-- Zone d'affichage de l'image, visible par tous -->
                    <div id="image-display-area">
                        <p>Aucune image sÃ©lectionnÃ©e.</p>
                    </div>
                </div>
                <div id="pj-content" class="tab-content">
                    <div class="sheets-controls">
                        <select id="sheet-select">
                            <option value="">Choisir une fiche</option>
                        </select>
                        <button id="add-sheet-btn" class="control-btn btn-add" title="Ajouter une fiche">+</button>
                        <button id="delete-sheet-btn" class="control-btn btn-delete" title="Supprimer la fiche">-</button>
                    </div>
                    <div id="sheet-display-area">
                        <!-- L'iframe de la Google Sheet ira ici -->
                    </div>
                </div>
                <div id="prez-content" class="tab-content" style="height: 100%;">
                    <div id="whiteboard-container" style="width: 100%; height: 100%;"></div>
                </div>
                <div id="fabric-content" class="tab-content">
                    <div class="whiteboard-controls">
                        <div id="fabric-toolbar">
                            <button id="fabric-select-tool" class="control-btn" title="Select">
                                <svg viewBox="0 0 24 24"><path d="M7.42,19.23L5.4,21.25L4,19.83L6,17.81L4.7,16.5L3.28,17.91L1.26,15.89L2.68,14.47L1.39,13.18L0,14.56L2.09,16.66L0.67,18.08L2.1,19.5L3.5,18.11L4.82,19.43L2.8,21.45L4.22,22.87L6.24,20.85L7.56,22.17L6.15,23.59L8.17,25.61L9.59,24.19L8.27,22.88L9.68,21.46L11.7,23.48L13.12,22.06L11.1,20.04L12.42,18.73L13.84,20.14L15.86,18.12L14.44,16.71L15.76,15.39L17.18,16.8L19.2,14.78L17.79,13.37L19.1,12.05L20.5,13.44L22.5,11.43L21.11,10L19.79,11.33L18.47,10L20.4,8L19,6.58L17.59,8L16.27,6.68L17.69,5.27L15.67,3.25L14.25,4.67L12.94,3.35L14.36,1.94L12.34,0L10.93,1.33L9.61,0.01L7.59,2.03L9,3.45L7.69,4.76L6.27,3.34L4.26,5.36L5.67,6.78L4.36,8.09L3,6.68L1,8.69L2.38,10.08L1.07,11.39L2.5,12.81L3.82,11.5L5.13,12.82L3.11,14.84L4.5,16.22L6.11,14.61L7.42,15.92L6,17.34L8.03,19.36L9.44,17.94L10.76,19.26L9.34,20.68L11.36,22.7L12.78,21.28L11.46,20L12.87,18.56L10.85,16.54L12.27,15.13L13.58,16.44L15.6,14.42L14.19,13L15.5,11.69L16.9,13.08L18.91,11.06L17.5,9.65L18.82,8.33L20.24,9.75L22.26,7.73L20.84,6.31L22.16,5L23.58,6.41L25.6,4.39L24.19,2.97L25.5,1.66L24.09,0.25L22.07,2.27L20.65,0.85L19.24,2.27L17.22,0.25L15.8,1.67L17.12,3L15.8,4.29L14.39,2.88L12.37,4.9L13.79,6.32L12.47,7.63L11.06,6.22L9.04,8.24L10.46,9.66L9.14,11L7.73,9.56L5.71,11.58L7.13,13L5.81,14.29L4.4,12.87L2.38,14.9L3.8,16.32L2.48,17.63L1,16.22L-1,18.24L0.41,19.66L-0.9,21L0.5,22.38L1.82,21.07L3.13,22.38L1.11,24.4L2.53,25.82L4.54,23.8L5.86,25.12L4.45,26.53L6.47,28.55L7.88,27.14L9.2,28.45L7.78,29.87L9.8,31.89L11.22,30.47L12.53,31.78L11.12,33.2L13.14,35.22L14.55,33.8L15.87,35.12L14.46,36.53L16.48,38.55L17.89,37.14L19.21,38.45L17.8,39.87L19.82,41.89L21.23,40.47L22.55,41.78L21.14,43.2L23.16,45.22L24.57,43.8L25.89,45.12L24.48,46.53L26.5,48.55L27.91,47.14L29.23,48.45L27.82,49.87L29.84,51.89L31.25,50.47L32.57,51.78L31.16,53.2L33.18,55.22L34.59,53.8L35.91,55.12L34.5,56.53L36.52,58.55L37.93,57.14L39.25,58.45L37.84,59.87L39.86,61.89L41.27,60.47L42.59,61.78L41.18,63.2L43.2,65.22L44.61,63.8L45.93,65.12L44.52,66.53L46.54,68.55L47.95,67.14L49.27,68.45L47.86,69.87L49.88,71.89L51.29,70.47L52.61,71.78L51.2,73.2L53.22,75.22L54.63,73.8L55.95,75.12L54.54,76.53L56.56,78.55L57.97,77.14L59.29,78.45L57.88,79.87L59.9,81.89L61.31,80.47L62.63,81.78L61.22,83.2L63.24,85.22L64.65,83.8L65.97,85.12L64.56,86.53L66.58,88.55L67.99,87.14L69.31,88.45L67.9,89.87L69.92,91.89L71.33,90.47L72.65,91.78L71.24,93.2L73.26,95.22L74.67,93.8L75.99,95.12L74.58,96.53L76.6,98.55L78.01,97.14L79.33,98.45L77.92,99.87L79.94,101.89L81.35,100.47L82.67,101.78L81.26,103.2L83.28,105.22L84.69,103.8L85.01,104.12C85.01,104.12 7.42,19.23 7.42,19.23Z" fill-rule="evenodd" clip-rule="evenodd" stroke-width="3.9" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            </button>
                            <button id="fabric-pencil-tool" class="control-btn" title="Pencil">
                                <svg viewBox="0 0 24 24"><path d="M18.08,3.15L17.05,2.12L15.28,3.89L16.31,4.92M17.76,6.33L16.73,5.3L12.5,9.54L13.54,10.57M9.2,16.29L12.12,13.36L13.16,14.4L10.23,17.32L9.2,16.29M5.89,19.6L3.87,17.58L8.18,13.27L10.2,15.29M3.21,19.96L2.2,18.95L3.97,17.18L5,18.21M19.18,4.92L18.15,3.89L20.69,1.35L21.72,2.38"/></svg>
                            </button>
                            <button id="fabric-line-tool" class="control-btn" title="Line">
                                <svg viewBox="0 0 24 24"><path d="M21.71,3.29L3.29,21.71A1,1,0,0,1,1.88,20.29L20.29,1.88A1,1,0,0,1,21.71,3.29Z"/></svg>
                            </button>
                            <button id="fabric-rect-tool" class="control-btn" title="Rectangle">
                                <svg viewBox="0 0 24 24"><path d="M4,4H20A2,2,0,0,1,22,6V18A2,2,0,0,1,20,20H4A2,2,0,0,1,2,18V6A2,2,0,0,1,4,4M4,6V18H20V6Z"/></svg>
                            </button>
                            <button id="fabric-circle-tool" class="control-btn" title="Circle">
                                <svg viewBox="0 0 24 24"><path d="M12,2A10,10,0,1,1,2,12,10,10,0,0,1,12,2M12,4A8,8,0,1,0,20,12,8,8,0,0,0,12,4Z"/></svg>
                            </button>
                            <input type="file" id="fabric-image-input" style="display: none;" accept="image/*" />
                            <label for="fabric-image-input" class="control-btn" title="Add Image">
                                <svg viewBox="0 0 24 24"><path d="M19,19H5V5H19M19,3H5A2,2,0,0,0,3,5V19A2,2,0,0,0,5,21H19A2,2,0,0,0,21,19V5A2,2,0,0,0,19,3M13.96,12.29L11.21,15.83L9.25,13.47L6.5,17H17.5L13.96,12.29Z"/></svg>
                            </label>
                            <input type="color" id="fabric-color-picker" class="control-btn" title="Color Picker" />
                            <button id="fabric-delete-tool" class="control-btn btn-delete" title="Delete">
                                <svg viewBox="0 0 24 24"><path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2,0,0,0,8,21H16A2,2,0,0,0,18,19V7H6V19Z"/></svg>
                            </button>
                        </div>
                        <div>
                            <input type="file" id="fabric-background-image-input" style="display: none;" accept="image/*" />
                            <label for="fabric-background-image-input" class="control-btn btn-add" title="Set Background Image">+</label>
                        </div>
                    </div>
                    <canvas id="fabric-canvas"></canvas>
                </div>
            </div>
            <nav class="main-menu">
                <a href="#carte" class="menu-item" data-target="carte-content">Carte</a>
                <a href="#pj" class="menu-item" data-target="pj-content">PJ</a>
                <a href="#prez" class="menu-item" data-target="prez-content">Prez</a>
                <a href="#fabric" class="menu-item" data-target="fabric-content">Fabric</a>
            </nav>
        </main>
        <aside class="panel right-panel">
            <div class="panel-header">
                <h2>VidÃ©o</h2>
                <div id="global-controls">
                    <button id="mute-mic-btn" title="Couper le micro">ðŸŽ¤</button>
                    <button id="toggle-video-btn" title="DÃ©sactiver la camÃ©ra">ðŸ“·</button>
                </div>
            </div>
            <div id="video-grid">
                <!-- Les flux vidÃ©o apparaÃ®tront ici -->
            </div>
        </aside>
    </div>

    <!-- Panel Toggles -->
    <button id="toggle-chat-btn" title="Cacher le panneau de chat">Â«</button>
    <button id="toggle-video-panel-btn" title="Cacher le panneau de vidÃ©o">Â»</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <script src="navigation.js" defer></script>
    <script src="script.js" defer></script>
    <script src="sheets.js" defer></script>
    <script src="images.js" defer></script>
    <script src="fabric-whiteboard.js" defer></script>
</body>
</html>
